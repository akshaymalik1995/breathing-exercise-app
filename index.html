<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breathe</title>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel='manifest' href='manifest.json'>
</head>
<body>

    <div class="jumbotron"><h1 class="text-center">Breathing Exercise</h1></div>

   

    <div class="row justify-content-center">
        <div class="text-center col-sm-12 col-lg-6">
            
            <svg width="40" height="200">
                <!-- <circle cx="100" cy="100" r="50" stroke="green" stroke-width="1" fill="white" /> -->
                <rect width="40" height="200" style="fill:rgb(221, 118, 118);stroke-width:1;stroke:rgb(0,0,0)" />
                <rect class="rect" width="40" height="200" style="fill:rgb(255, 255, 255);stroke-width:1;stroke:rgb(0,0,0)" />
            </svg>
            
        </div>
    
        <div class="col-sm-12 col-lg-6 mx-auto">
            <div class="mt-4">
                <h1 class="count text-center"></h1> 

            </div>

            <div class="my-4">
                <h3 class="text-center breathe-mode"></h3>
            </div>

            
            

            <div class="text-center mt-5">
                <button class="start mx-2 btn btn-primary">Start</button>
                <button class="pause mx-2 btn btn-secondary">Pause</button>
                <button class="reset mx-2 btn btn-danger">Reset</button>
                

            </div>
            
        </div>
    </div>


    
    
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    //Get the elements
    // Get the circle shape
    //const circle = document.querySelector("circle")
    const rect = document.querySelector(".rect")
    // We will INHALE OR EXHALE based on the breathing mode
    const breathe_mode =  document.querySelector(".breathe-mode")

    const start = document.querySelector(".start")
    const pause = document.querySelector(".pause")
    const reset = document.querySelector(".reset")

    // We will output number of breathe count
    const count = document.querySelector(".count")


    let breathe_count
    if (localStorage.breathe_count){
        breathe_count = Number(localStorage.breathe_count)
    } else {
        breathe_count = 0
    }
    
    count.innerHTML = breathe_count // Write the count value to html tag

    // FUNCTION TO INCREASE OR DECREASE RADIUS OF THE CIRCLE
    let inhaling = true
    function change_height() {
        let height = rect.getAttribute("height")  // get the radius
        
        height = parseInt(height) //convert it to integer
        
        if (inhaling) {  
            breathe_mode.innerHTML = "Inhale" // Change breathe mode
            
            height = height - 5
            if (height == 00){
                inhaling = false
            }
        }
        else{
            breathe_mode.innerHTML = "Exhale"
            
            height = height + 5
            if (height == 200){
                inhaling = true
                breathe_count = breathe_count + 1
                localStorage.setItem("breathe_count", breathe_count)
                count.innerHTML = Number(localStorage.breathe_count)
            }
        }
        rect.setAttribute("height" , height)
        
    }

    let interval // This is the variable for the setinterval function we will execute
    let breathing = false
    
    start.addEventListener("click" , () => {
        if (!breathing){
            breathing = true
            
            interval = setInterval(change_height, 80)

        }
            
    })



    pause.addEventListener("click" , () => {
        clearInterval(interval)
        breathing = false
        inhaling = true
        rect.setAttribute("height" , 200)
        //breathe_count = 0
        count.innerHTML = breathe_count
        //circle.setAttribute("fill", "white")
        breathe_mode.innerHTML = ""
    })

    reset.addEventListener("click", () => {
        clearInterval(interval)
        breathing = false
        inhaling = true
        rect.setAttribute("height" , 200)
        breathe_mode.innerHTML = ""
        if (localStorage.breathe_count){
            breathe_count = 0
            localStorage.setItem("breathe_count", breathe_count)
            count.innerHTML = Number(localStorage.breathe_count)
            
        }
        
    })


    

    

</script>
</body>
</html>